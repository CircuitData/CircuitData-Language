{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": ["open_trade_transfer_package"],
  "properties": {
    "open_trade_transfer_package": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "version": {
          "type": "string",
          "pattern": "^1.0$"
        },
        "information": { "$ref": "https://raw.githubusercontent.com/elmatica/Open-Trade-Transfer-Package/master/v1/ottp_schema_definitions.json#/definitions/information" },
        "products": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "generic": {
              "type": "object",
              "properties": {},
              "id": "generic",
              "description": "this should validate any element under generic to be valid"
            }
          },
          "patternProperties": {
            "^(?!generic$).*": {
              "type": "object",
              "additionalProperties": false,
              "required": ["printed_circuits_fabrication_data"],
              "properties": {
                "printed_circuits_fabrication_data": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["version"],
                  "properties": {
                    "version": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/version" },
                    "stackup": {
                      "type": "object",
                      "additionalProperties": false,
                      "required": ["specification_level"],
                      "properties": {
                        "specification_level": {
                          "type": "string",
                          "enum": ["free", "separate_file", "specified"],
                          "uom": null,
                          "description": "The stack up of this board"
                        },
                        "file_name": {
                          "type": "string",
                          "format": "uri",
                          "uom": null,
                          "description": "The URI of the file that specifies the stackup. Either as a path witin a project compressed file (ZIP) or as a link"
                        },
                        "specified": {
                          "type": "object",
                          "uom": null,
                          "description": "The container where the elements describing the stackup should be placed. All elements under object must contain the \"layer_order\" tags to set the order of the layer. They should also contain the \"layer_name\" tag to set the descriptive name of the layer",
                          "properties": {
                            "rigid_conductive_layer": {
                              "type": "object",
                              "additionalProperties": false,
                              "required": ["layer_order", "layer_name"],
                              "properties": {
                                "minimum_internal_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_track_width" },
                                "minimum_external_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_track_width" },
                                "minimum_internal_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_spacing_width" },
                                "minimum_external_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_spacing_width" },
                                "external_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/external_base_copper_thickness" },
                                "internal_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/internal_base_copper_thickness" },
                                "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" },
                                "copper_coverage_average": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_coverage_average" },
                                "layer_order": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/stackup_specific/layer_order" },
                                "layer_name": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/stackup_specific/layer_name" }
                              }
                            },
                            "flexible_conductive_layer": {
                              "type": "object",
                              "additionalProperties": false,
                              "required": ["layer_order", "layer_name"],
                              "properties": {
                                "minimum_internal_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_track_width" },
                                "minimum_external_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_track_width" },
                                "minimum_internal_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_spacing_width" },
                                "minimum_external_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_spacing_width" },
                                "external_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/external_base_copper_thickness" },
                                "internal_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/internal_base_copper_thickness" },
                                "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" },
                                "copper_coverage_average": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_coverage_average" },
                                "layer_order": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/stackup_specific/layer_order" },
                                "layer_name": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/stackup_specific/layer_name" }
                              }
                            },
                            "legend": {
                              "type": "object",
                              "additionalProperties": false,
                              "properties": {
                                "color": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/color" },
                                "top": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/top" },
                                "bottom": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/bottom" }
                              }
                            }
                          }
                        }
                      },
                      "aliases": "stack-up, buildup, build-up",
                      "name": "Stackup",
                      "description": "The stackup of the board: Free stackup (supplier to choose), specified in a separate file or specified in this file. Can also include the stackup itself."
                    },
                    "rigid_conductive_layer": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "count": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/count" },
                        "minimum_internal_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_track_width" },
                        "minimum_external_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_track_width" },
                        "minimum_internal_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_spacing_width" },
                        "minimum_external_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_spacing_width" },
                        "external_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/external_base_copper_thickness" },
                        "internal_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/internal_base_copper_thickness" },
                        "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" },
                        "copper_coverage_average": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_coverage_average" }
                      }
                    },
                    "flexible_conductive_layer": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "count": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/count" },
                        "minimum_internal_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_track_width" },
                        "minimum_external_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_track_width" },
                        "minimum_internal_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_spacing_width" },
                        "minimum_external_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_spacing_width" },
                        "external_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/external_base_copper_thickness" },
                        "internal_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/internal_base_copper_thickness" },
                        "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" },
                        "copper_coverage_average": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_coverage_average" }
                      }
                    },
                    "legend": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "color": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/color" },
                        "top": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/top" },
                        "bottom": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/bottom" }
                      }
                    }
                  }
                }
              },
              "description": "This part should take care of all the products. Note that products can have any names"
            }
          }
        },
        "profiles": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "defaults": {
              "type": "object",
              "required": ["printed_circuits_fabrication_data"],
              "properties": {
                "printed_circuits_fabrication_data": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["version"],
                  "properties": {
                    "version": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/version" },
                    "rigid_conductive_layer": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" }
                      }
                    },
                    "flexible_conductive_layer": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" }
                      }
                    },
                    "legend": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "color": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/color" },
                        "top": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/top" },
                        "bottom": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/bottom" }
                      }
                    }
                  }
                }
              }
            },
            "restricted": {
              "type": "object",
              "required": ["printed_circuits_fabrication_data"],
              "properties": {
                "printed_circuits_fabrication_data": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["version"],
                  "properties": {
                    "version": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/version" },
                    "rigid_conductive_layer": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "minimum_internal_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_track_width" },
                        "minimum_external_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_track_width" },
                        "minimum_internal_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_spacing_width" },
                        "minimum_external_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_spacing_width" },
                        "external_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/external_base_copper_thickness" },
                        "internal_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/internal_base_copper_thickness" },
                        "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" }
                      }
                    },
                    "flexible_conductive_layer": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "minimum_internal_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_track_width" },
                        "minimum_external_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_track_width" },
                        "minimum_internal_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_spacing_width" },
                        "minimum_external_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_spacing_width" },
                        "external_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/external_base_copper_thickness" },
                        "internal_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/internal_base_copper_thickness" },
                        "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" }
                      }
                    },
                    "legend": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "color": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/color" },
                        "top": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/top" },
                        "bottom": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/bottom" }
                      }
                    }
                  }
                }
              }
            },
            "enforced": {
              "type": "object",
              "required": ["printed_circuits_fabrication_data"],
              "properties": {
                "printed_circuits_fabrication_data": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["version"],
                  "properties": {
                    "version": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/version" },
                    "rigid_conductive_layer": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" }
                      }
                    },
                    "flexible_conductive_layer": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" }
                      }
                    },
                    "legend": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "color": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/color" },
                        "top": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/top" },
                        "bottom": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/bottom" }
                      }
                    }
                  }
                }
              }

            }
          }
        },
        "capabilities": {
          "type": "object",
          "additionalProperties": false,
          "required": ["printed_circuits_fabrication_data"],
          "properties": {
            "printed_circuits_fabrication_data": {
              "type": "object",
              "additionalProperties": false,
              "required": ["version"],
              "properties": {
                "version": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/version" },
                "rigid_conductive_layer": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "count": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/count" },
                    "minimum_internal_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_track_width" },
                    "minimum_external_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_track_width" },
                    "minimum_internal_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_spacing_width" },
                    "minimum_external_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_spacing_width" },
                    "external_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/external_base_copper_thickness" },
                    "internal_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/internal_base_copper_thickness" },
                    "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" },
                    "copper_coverage_average": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_coverage_average" }
                  }
                },
                "flexible_conductive_layer": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "count": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/count" },
                    "minimum_internal_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_track_width" },
                    "minimum_external_track_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_track_width" },
                    "minimum_internal_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_internal_spacing_width" },
                    "minimum_external_spacing_width": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/minimum_external_spacing_width" },
                    "external_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/external_base_copper_thickness" },
                    "internal_base_copper_thickness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/internal_base_copper_thickness" },
                    "copper_foil_roughness": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_foil_roughness" },
                    "copper_coverage_average": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/conductive_layer/copper_coverage_average" }
                  }
                },
                "legend": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "color": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/color" },
                    "top": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/top" },
                    "bottom": { "$ref": "ottp_circuitdata_schema_definitions.json#/definitions/elements/legend/bottom" }
                  }
                }
              }
            }
          },
          "description": "This part should take care of all the products. Note that products can have any names"
         },
        "custom": {  }
      }
    }
  }
}
